{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/ItemsPanel.ts"],"names":["_decorator","BlockInputEvents","Component","instantiate","Label","Node","Prefab","DraggableItem","ccclass","property","ItemsPanel","onItemAHodler","cantItemsA","blocker","bluePrintManager","onLoad","i_a_holder","addComponent","enabled","Number","N_items_a","string","node","on","EventType","MOUSE_ENTER","onMouseEnter","MOUSE_LEAVE","onMouseLeave","MOUSE_MOVE","infoLabel","setBluePrintManager","bpm","elementReleased","dragabbleItemNode","setInfo","setActualNode","incrementItems","String","instantiateItem","position","item","getComponent","ItemPanel","setAvailableToMove","parent","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, BlockInputEvents, Component, instantiate, Label, Node, Prefab, v3, Vec2, Vec3 } from 'cc';\r\nimport { DraggableItem } from './DraggableItem';\r\nimport { BluePrintManager } from './BluePrintManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('ItemsPanel')\r\nexport class ItemsPanel extends Component {\r\n\r\n    @property(Prefab)\r\n    private item: Prefab;\r\n    @property(Label)\r\n    public N_items_a: Label;\r\n    @property(Label)\r\n    public infoLabel: Label\r\n    @property(Node)\r\n    private i_a_holder: Node;\r\n\r\n    private onItemAHodler = false;\r\n    private cantItemsA = 0;\r\n    private blocker: BlockInputEvents;\r\n    private bluePrintManager: BluePrintManager;\r\n\r\n\r\n    protected onLoad(): void {\r\n        this.blocker = this.i_a_holder.addComponent(BlockInputEvents)\r\n        this.blocker.enabled = false;\r\n        this.cantItemsA = Number(this.N_items_a.string);\r\n        this.node.on(Node.EventType.MOUSE_ENTER, this.onMouseEnter, this);\r\n        this.node.on(Node.EventType.MOUSE_LEAVE, this.onMouseLeave, this);\r\n        this.i_a_holder.on(Node.EventType.MOUSE_MOVE, () => {\r\n            this.infoLabel.string = \"OVER\"\r\n            this.onItemAHodler = true\r\n        }, this);\r\n        this.i_a_holder.on(Node.EventType.MOUSE_LEAVE, () => {\r\n            this.infoLabel.string = \"OUT\"\r\n            this.onItemAHodler = false\r\n        }, this);\r\n    }\r\n\r\n    setBluePrintManager(bpm: BluePrintManager) {\r\n        this.bluePrintManager = bpm;\r\n    }\r\n\r\n    elementReleased(dragabbleItemNode: Node) {\r\n        this.bluePrintManager.setInfo(\"han soltado\")\r\n        this.bluePrintManager.elementReleased(dragabbleItemNode);\r\n    }\r\n\r\n    onMouseEnter() {\r\n        this.bluePrintManager.setInfo(\"Entraron a Item Menu\")\r\n        this.bluePrintManager.setActualNode(this.node);\r\n    }\r\n\r\n    onMouseLeave() {\r\n        this.bluePrintManager.setInfo(\"Salieron de Item Menu\")\r\n        this.bluePrintManager.setActualNode(null);\r\n    }\r\n\r\n    incrementItems() {\r\n        this.cantItemsA++;\r\n        this.N_items_a.string = String(this.cantItemsA);\r\n    }\r\n\r\n    instantiateItem(position: Vec3) {\r\n        if (this.onItemAHodler && this.cantItemsA > 0) {\r\n            this.cantItemsA--;\r\n            this.N_items_a.string = String(this.cantItemsA);\r\n            const node = instantiate(this.item);\r\n            node.getComponent(DraggableItem).ItemPanel = this.node;\r\n            if (this.cantItemsA > 0) {\r\n                node.getComponent(DraggableItem).setAvailableToMove(true);\r\n            }\r\n            node.parent = this.node;\r\n            node.position = position;\r\n        }\r\n    }\r\n\r\n    start() {\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n    }\r\n}\r\n\r\n\r\n"]}
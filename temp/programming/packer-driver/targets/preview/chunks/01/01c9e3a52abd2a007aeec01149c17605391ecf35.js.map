{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/DelaunayPackage/Delaunay.ts"],"names":["linkNode","plainVertex","Vertex","Pair","Edge","Triangle","removeOutRunners","verts","cant","border","j","a","b","c","v1","unitaryVector","v2","maxAngle","getRelativeAngle","links","length","k","angle","filterNulls","getRads","vecA","constPI","x","y","baseAngle","Math","abs","atan","vecB","rads","transformedVectorB","Vec2","cos","sin","round","n","decimals","pow","elementsArr","i","pop","cross","lengthVector","sqrt","posA","posB","_decorator","Graphics","ccclass","property","EPSILON","constructor","_angle","addLink","v","founded","forEach","element","vertex","push","v0","equals","other","inverse","center","calcCircumCicle","A","B","C","D","E","F","G","dx","dy","minx","min","miny","maxx","max","maxy","cx","cy","radius_squared","radius","inCircumcircle","dist_squared","Delaunay","start","numeros","filter","vertices","triangles","triangulate","triangle","moveTo","lineTo","stroke","plainVerts","plainData","output","pV","lk","lN","update","deltaTime","st","createBoundingTriangle","addVertex","undefined","stv0","stv1","stv2","edges","uniqueEdges","edge","edge1","unique","edge2"],"mappings":"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","sourcesContent":["import { _decorator, Component, Graphics,Vec2 } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nconst EPSILON = 1.0e-6\r\nconst constPI = 3.14159265359\r\n\r\nclass linkNode extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public _angle = 0;\r\n    constructor(x: number, y: number, angle: number) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this._angle = angle;\r\n    }\r\n}\r\nclass plainVertex extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public border: boolean = false;\r\n    public links: linkNode[] = []\r\n    constructor(x: number, y: number, border: boolean = false) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.border = border;\r\n    }\r\n}\r\n\r\nclass Vertex extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public border: boolean = false;\r\n    public links: Pair[] = []\r\n    constructor(x: number, y: number, border: boolean = false) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.border = border;\r\n    }\r\n\r\n    addLink(v: Pair) {\r\n        let founded = false;\r\n        this.links.forEach(element => {\r\n            if (v.vertex === element.vertex) {\r\n                founded = true;\r\n            }\r\n        });\r\n        if (!founded) this.links.push(v);\r\n    }\r\n}\r\n\r\nexport function removeOutRunners(verts: plainVertex[]) {\r\n    let cant = 0;\r\n    while (verts[cant] != null && verts[cant].border) {\r\n        cant++;\r\n    }\r\n    for (let j = 0; j < cant; ++j) {\r\n        let a = verts[j];\r\n        let b = verts[0];\r\n        let c = verts[j - 1];\r\n        if (j < cant - 1) b = verts[j + 1];\r\n        if (j == 0) c = verts[cant - 1]\r\n        let v1 = unitaryVector(a, b)\r\n        let v2 = unitaryVector(a, c)\r\n        let maxAngle = getRelativeAngle(v1, v2)\r\n        if (a.links.length > 0) {\r\n            for (let k = 0; k < a.links.length; k++) {\r\n                if (a.links[k] != null) {\r\n                    v2 = unitaryVector(a, a.links[k])\r\n                    let angle = getRelativeAngle(v1, v2)\r\n                    if (angle >= maxAngle || angle==0) {\r\n                        a.links[k] = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        filterNulls(a.links)\r\n    }\r\n}\r\n\r\n\r\nexport function getRads(vecA:Vec2){\r\n    const constPI = 3.14159265359\r\n    if(vecA.x<0.001&&vecA.x>-0.001 ){\r\n        if(vecA.y>0){ return constPI/2 } else{ return constPI*(3/2) }\r\n    }\r\n    if(vecA.y<0.001 &&vecA.y>-0.001 ){\r\n        if(vecA.x>0){ return 0 } else { return constPI }\r\n    }\r\n        let baseAngle=Math.abs(Math.atan((vecA.y) / (vecA.x)))\r\n        if(vecA.x<0&&vecA.y>0) baseAngle+=constPI/2\r\n        if(vecA.x<0&&vecA.y<0) baseAngle+=constPI\r\n        if(vecA.x>0&&vecA.y<0) baseAngle+=constPI*(3/2)\r\n    return baseAngle\r\n\r\n}\r\nexport function getRelativeAngle(vecA: Vec2, vecB: Vec2) {\r\n    let rads=getRads(vecA) \r\n    let transformedVectorB=new Vec2(vecB.x*Math.cos(rads)+vecB.y*Math.sin(rads),-1*vecB.x*Math.sin(rads)+vecB.y*Math.cos(rads));\r\n   return round(getRads(transformedVectorB),3);\r\n\r\n}\r\n\r\nexport function round(n:number, decimals:number){\r\n    return Math.round(n*Math.pow(10,decimals))/(Math.pow(10,decimals));\r\n}\r\n\r\nexport function filterNulls(elementsArr: any[]) {\r\n    for (let i = 0; i < elementsArr.length; i++) {\r\n        if (elementsArr[i] == null) {\r\n            for (let j = i + 1; j < elementsArr.length; j++) {\r\n                if (elementsArr[j] != null) {\r\n                    elementsArr[i] = elementsArr[j];\r\n                    elementsArr[j] = null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (let i = elementsArr.length - 1; i > 0; i--) {\r\n        if (elementsArr[i] == null) elementsArr.pop();\r\n    }\r\n}\r\n\r\nclass Pair {\r\n    public vertex: Vertex;\r\n    public angle: number;\r\n    constructor(vertex: Vertex, angle: number) {\r\n        this.vertex = vertex;\r\n        this.angle = angle;\r\n    }\r\n}\r\n\r\n\r\nclass Edge {\r\n    public v0: Vertex;\r\n    public v1: Vertex;\r\n    constructor(v0: Vertex, v1: Vertex) {\r\n        this.v0 = v0;\r\n        this.v1 = v1;\r\n    }\r\n    equals = function (other: Edge) { return (this.v0 === other.v0 && this.v1 === other.v1); }\r\n    inverse = function () { return new Edge(this.v1, this.v0); };\r\n}\r\n\r\nclass Triangle {\r\n    public v0: Vertex;\r\n    public v1: Vertex;\r\n    public v2: Vertex;\r\n    public center: number = 0;\r\n    constructor(v0: Vertex, v1: Vertex, v2: Vertex) {\r\n        this.v0 = v0;\r\n        this.v1 = v1;\r\n        this.v2 = v2;\r\n        this.calcCircumCicle();\r\n    }\r\n\r\n    calcCircumCicle = function () {\r\n        var A = this.v1.x - this.v0.x;\r\n        var B = this.v1.y - this.v0.y;\r\n        var C = this.v2.x - this.v0.x;\r\n        var D = this.v2.y - this.v0.y;\r\n        var E = A * (this.v0.x + this.v1.x) + B * (this.v0.y + this.v1.y);\r\n        var F = C * (this.v0.x + this.v2.x) + D * (this.v0.y + this.v2.y);\r\n        var G = 2.0 * (A * (this.v2.y - this.v1.y) - B * (this.v2.x - this.v1.x));\r\n        var dx, dy;\r\n        if (Math.abs(G) < EPSILON) {\r\n            var minx = Math.min(this.v0.x, this.v1.x, this.v2.x);\r\n            var miny = Math.min(this.v0.y, this.v1.y, this.v2.y);\r\n            var maxx = Math.max(this.v0.x, this.v1.x, this.v2.x);\r\n            var maxy = Math.max(this.v0.y, this.v1.y, this.v2.y);\r\n            this.center = new Vertex((minx + maxx) / 2, (miny + maxy) / 2);\r\n            dx = this.center.x - minx;\r\n            dy = this.center.y - miny;\r\n        } else {\r\n            var cx = (D * E - B * F) / G;\r\n            var cy = (A * F - C * E) / G;\r\n            this.center = new Vertex(cx, cy);\r\n            dx = this.center.x - this.v0.x;\r\n            dy = this.center.y - this.v0.y;\r\n        }\r\n        this.radius_squared = dx * dx + dy * dy;\r\n        this.radius = Math.sqrt(this.radius_squared);\r\n    };\r\n\r\n    inCircumcircle = function (v: Vertex) {\r\n        var dx = this.center.x - v.x;\r\n        var dy = this.center.y - v.y;\r\n        var dist_squared = dx * dx + dy * dy;\r\n        return (dist_squared <= this.radius_squared);\r\n    }\r\n}\r\n\r\nfunction cross(vecA: Vec2, vecB: Vec2) {\r\n    return vecA.x * vecB.y - vecB.x * vecA.y;\r\n}\r\n\r\nfunction lengthVector(a: Vec2, b: Vec2) {\r\n    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\r\n}\r\n\r\nfunction unitaryVector(posA: Vec2, posB: Vec2) {\r\n    let length = lengthVector(posA, posB);\r\n    return new Vec2((posB.x - posA.x) / length, (posB.y - posA.y) / length);\r\n}\r\n\r\n\r\n\r\n@ccclass('Delaunay')\r\nexport class Delaunay extends Graphics {\r\n    start() {\r\n        let numeros = [12, 35, 97, 35]\r\n        numeros = numeros.filter((x) => x % 2 == 0)\r\n        let vertices: Vertex[] = [];\r\n        vertices.push(new Vertex(0, 0, true))   //0\r\n        vertices.push(new Vertex(10, 0, true))  //1\r\n        vertices.push(new Vertex(20, 0, true))  //2\r\n        vertices.push(new Vertex(20, 10, true)) //3\r\n        vertices.push(new Vertex(20, 20, true)) //4\r\n        vertices.push(new Vertex(20, 30, true)) //5\r\n        vertices.push(new Vertex(20, 40, true)) //6\r\n        vertices.push(new Vertex(30, 40, true)) //7\r\n        vertices.push(new Vertex(40, 40, true)) //8\r\n        vertices.push(new Vertex(50, 40, true)) //8\r\n        vertices.push(new Vertex(60, 40, true)) //8\r\n        vertices.push(new Vertex(70, 40, true)) //8\r\n        vertices.push(new Vertex(80, 40, true)) //8\r\n        vertices.push(new Vertex(90, 40, true)) //8\r\n        vertices.push(new Vertex(100, 40, true)) //8\r\n        vertices.push(new Vertex(110, 40, true)) //8\r\n        vertices.push(new Vertex(120, 40, true)) //8\r\n        vertices.push(new Vertex(120, 30, true)) //8\r\n        vertices.push(new Vertex(120, 20, true)) //8\r\n        vertices.push(new Vertex(120, 10, true)) //8\r\n        vertices.push(new Vertex(120, 0, true)) //8\r\n        vertices.push(new Vertex(130, 0, true)) //8\r\n        vertices.push(new Vertex(140, 0, true)) //8\r\n        vertices.push(new Vertex(140, 10, true)) //8\r\n        vertices.push(new Vertex(140, 20, true)) //8\r\n        vertices.push(new Vertex(140, 30, true)) //8\r\n        vertices.push(new Vertex(140, 40, true)) //8\r\n        vertices.push(new Vertex(140, 50, true)) //8\r\n        vertices.push(new Vertex(140, 60, true)) //8\r\n        vertices.push(new Vertex(130, 60, true)) //8\r\n        vertices.push(new Vertex(120, 60, true)) //8\r\n        vertices.push(new Vertex(110, 60, true)) //8\r\n        vertices.push(new Vertex(100, 60, true)) //8\r\n        vertices.push(new Vertex(90, 60, true)) //8\r\n        vertices.push(new Vertex(80, 60, true)) //8\r\n        vertices.push(new Vertex(70, 60, true)) //8\r\n        vertices.push(new Vertex(60, 60, true)) //8\r\n        vertices.push(new Vertex(50, 60, true)) //8\r\n        vertices.push(new Vertex(40, 60, true)) //10\r\n        vertices.push(new Vertex(30, 60, true)) //11\r\n        vertices.push(new Vertex(20, 60, true)) //12\r\n        vertices.push(new Vertex(10, 60, true)) //13\r\n        vertices.push(new Vertex(0, 60, true))  //14\r\n        vertices.push(new Vertex(0, 50, true))  //15\r\n        vertices.push(new Vertex(0, 40, true))  //16\r\n        vertices.push(new Vertex(0, 30, true))  //17\r\n        vertices.push(new Vertex(0, 20, true))  //18\r\n        vertices.push(new Vertex(0, 10, true))  //19\r\n        vertices.push(new Vertex(8, 41))  //7\r\n        vertices.push(new Vertex(9, 48))  //7\r\n        vertices.push(new Vertex(10, 13)) //8\r\n        vertices.push(new Vertex(11, 26)) //8\r\n        vertices.push(new Vertex(18, 47))\r\n        vertices.push(new Vertex(31, 52))\r\n        vertices.push(new Vertex(48, 48))\r\n        vertices.push(new Vertex(60, 51))\r\n        vertices.push(new Vertex(68, 52))\r\n        vertices.push(new Vertex(81, 49))\r\n        vertices.push(new Vertex(90, 52))\r\n        vertices.push(new Vertex(99, 50))\r\n        vertices.push(new Vertex(110, 51))\r\n        vertices.push(new Vertex(119, 52))\r\n        vertices.push(new Vertex(128, 49))\r\n        vertices.push(new Vertex(130, 41))  //7\r\n        vertices.push(new Vertex(128, 13)) //8\r\n        vertices.push(new Vertex(131, 26)) //8\r\n        let triangles = this.triangulate(vertices)\r\n\r\n        triangles.forEach(triangle => {\r\n            triangle.v0.addLink(new Pair(triangle.v1,  getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v0, triangle.v1))))\r\n            triangle.v1.addLink(new Pair(triangle.v0, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v1, triangle.v0))))\r\n            triangle.v1.addLink(new Pair(triangle.v2, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v1, triangle.v2))))\r\n            triangle.v2.addLink(new Pair(triangle.v1, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v2, triangle.v1))))\r\n            triangle.v0.addLink(new Pair(triangle.v2, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v0, triangle.v2))))\r\n            triangle.v2.addLink(new Pair(triangle.v0, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v2, triangle.v0))))\r\n            this.moveTo(triangle.v0.x, triangle.v0.y)\r\n            this.lineTo(triangle.v1.x, triangle.v1.y)\r\n            this.lineTo(triangle.v2.x, triangle.v2.y)\r\n            this.lineTo(triangle.v0.x, triangle.v0.y)\r\n            this.stroke();\r\n        });\r\n        let plainVerts = this.plainData(vertices);\r\n        removeOutRunners(plainVerts)\r\n    }\r\n\r\n    plainData(verts: Vertex[]) {\r\n        let output: plainVertex[] = []\r\n        verts.forEach(element => {\r\n            let pV = new plainVertex(element.x, element.y, element.border);\r\n            element.links.forEach(lk => {\r\n                if (lk != null) {\r\n                    let lN = new linkNode(lk.vertex.x, lk.vertex.y, lk.angle)\r\n                    pV.links.push(lN);\r\n                }\r\n            })\r\n            output.push(pV);\r\n        })\r\n        return output\r\n    }\r\n\r\n \r\n\r\n    update(deltaTime: number) { }\r\n\r\n\r\n    triangulate(vertices) {\r\n        var triangles: Triangle[] = [];\r\n        // First, create a \"supertriangle\" that bounds all vertices\r\n        let st = this.createBoundingTriangle(vertices);\r\n   \r\n        triangles.push(st);\r\n        // Next, begin the triangulation one vertex at a time\r\n        // NOTE: This is O(n^2) - can be optimized by sorting vertices\r\n        // along the x-axis and only considering triangles that have\r\n        // potentially overlapping circumcircles\r\n        vertices.forEach((vertex: Vertex) => {\r\n            triangles = this.addVertex(vertex, triangles)\r\n        });\r\n        // Remove triangles that shared edges with \"supertriangle\"\r\n        triangles = triangles.filter((triangle) => {\r\n            if (triangle.v0 == st.v0 || triangle.v0 == st.v1 || triangle.v0 == st.v2 ||\r\n                triangle.v1 == st.v0 || triangle.v1 == st.v1 || triangle.v1 == st.v2 ||\r\n                triangle.v2 == st.v0 || triangle.v2 == st.v1 || triangle.v2 == st.v2) return false;\r\n            return true;\r\n        })\r\n        return triangles;\r\n    }\r\n\r\n    // Internal: create a triangle that bounds the given vertices, with room to spare\r\n    createBoundingTriangle(vertices) {\r\n        // NOTE: There's a bit of a heuristic here. If the bounding triangle\r\n        // is too large and you see overflow/underflow errors. If it is too small\r\n        // you end up with a non-convex hull.\r\n        var minx, miny, maxx, maxy;\r\n        vertices.forEach(function (vertex) {\r\n            if (minx === undefined || vertex.x < minx) { minx = vertex.x; }\r\n            if (miny === undefined || vertex.y < miny) { miny = vertex.y; }\r\n            if (maxx === undefined || vertex.x > maxx) { maxx = vertex.x; }\r\n            if (maxy === undefined || vertex.y > maxy) { maxy = vertex.y; }\r\n        });\r\n        var dx = (maxx - minx) * 5;\r\n        var dy = (maxy - miny) * 5;\r\n        var stv0 = new Vertex(minx - dx, miny - dy * 3);\r\n        var stv1 = new Vertex(minx - dx, maxy + dy);\r\n        var stv2 = new Vertex(maxx + dx * 3, maxy + dy);\r\n        return new Triangle(stv0, stv1, stv2);\r\n    }\r\n\r\n    // Internal: update triangulation with a vertex\r\n    addVertex(vertex: Vertex, triangles: Triangle[]) {\r\n        var edges: Edge[] = [];\r\n        // Remove triangles with circumcircles containing the vertex\r\n        triangles = triangles.filter((triangle) => {\r\n            if (triangle.inCircumcircle(vertex)) {\r\n                edges.push(new Edge(triangle.v0, triangle.v1));\r\n                edges.push(new Edge(triangle.v1, triangle.v2));\r\n                edges.push(new Edge(triangle.v2, triangle.v0));\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n\r\n        //console.log(\"ADDED VERTEX: \" + triangles.length)\r\n        edges = this.uniqueEdges(edges);\r\n        // Create new triangles from the unique edges and new vertex\r\n        edges.forEach((edge) => {\r\n            triangles.push(new Triangle(edge.v0, edge.v1, vertex));\r\n        });\r\n        return triangles;\r\n    }\r\n\r\n    // Internal: remove duplicate edges from an array\r\n    uniqueEdges(edges) {\r\n        // TODO: This is O(n^2), make it O(n) with a hash or some such\r\n        var uniqueEdges = [];\r\n        for (var i = 0; i < edges.length; ++i) {\r\n            var edge1 = edges[i];\r\n            var unique = true;\r\n            for (var j = 0; j < edges.length; ++j) {\r\n                if (i === j)\r\n                    continue;\r\n                var edge2 = edges[j];\r\n                if (edge1.equals(edge2) || edge1.inverse().equals(edge2)) {\r\n                    unique = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (unique) uniqueEdges.push(edge1);\r\n        }\r\n        return uniqueEdges;\r\n    }\r\n}\r\n\r\n\r\n"]}
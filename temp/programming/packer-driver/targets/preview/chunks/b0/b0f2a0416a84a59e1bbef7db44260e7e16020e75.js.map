{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/DraggableItem.ts"],"names":["_decorator","CCBoolean","Component","Input","Node","Vec3","ItemsPanel","ccclass","property","DraggableItem","moving","setAvailableToMove","available","availableToMove","onLoad","node","on","EventType","TOUCH_START","onTouchStart","TOUCH_MOVE","onTouchMove","TOUCH_END","onTouchEnd","event","ItemPanel","getComponent","instantiateItem","position","pos","getUILocation","setWorldPosition","x","y","elementReleased"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAaC,MAAAA,S,OAAAA,S;AAAYC,MAAAA,S,OAAAA,S;AAAyBC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,I,OAAAA,I;;AAE/DC,MAAAA,U,iBAAAA,U;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBR,U;;+BAGjBS,a,WADZF,OAAO,CAAC,eAAD,C,UAIHC,QAAQ,CAACP,SAAD,C,UAGRO,QAAQ,CAACJ,IAAD,C,2BAPb,MACaK,aADb,SACmCP,SADnC,CAC6C;AAAA;AAAA;AAAA,eAEjCQ,MAFiC,GAElB,KAFkB;;AAAA;;AAAA;AAAA;;AASzCC,QAAAA,kBAAkB,CAACC,SAAD,EAAoB;AAC1C,eAAKC,eAAL,GAAqBD,SAArB;AACK;;AAGDE,QAAAA,MAAM,GAAI;AACN,eAAKC,IAAL,CAAUC,EAAV,CAAab,KAAK,CAACc,SAAN,CAAgBC,WAA7B,EAA0C,KAAKC,YAA/C,EAA6D,IAA7D;AACA,eAAKJ,IAAL,CAAUC,EAAV,CAAab,KAAK,CAACc,SAAN,CAAgBG,UAA7B,EAAyC,KAAKC,WAA9C,EAA2D,IAA3D;AACA,eAAKN,IAAL,CAAUC,EAAV,CAAab,KAAK,CAACc,SAAN,CAAgBK,SAA7B,EAAwC,KAAKC,UAA7C,EAAyD,IAAzD;AAKH;;AAIDJ,QAAAA,YAAY,CAACK,KAAD,EAAoB;AAC7B,eAAKC,SAAL,CAAeC,YAAf;AAAA;AAAA,wCAAwCC,eAAxC,CAAwD,KAAKZ,IAAL,CAAUa,QAAlE;AAGF;;AACDP,QAAAA,WAAW,CAACG,KAAD,EAAoB;AAC3B,cAAG,KAAKX,eAAR,EAAwB;AAExB,iBAAKH,MAAL,GAAY,IAAZ,CAFwB,CAGxB;;AACA,gBAAImB,GAAG,GAAGL,KAAK,CAACM,aAAN,EAAV;AACA,iBAAKf,IAAL,CAAUgB,gBAAV,CAA2B,IAAI1B,IAAJ,CAASwB,GAAG,CAACG,CAAb,EAAgBH,GAAG,CAACI,CAApB,EAAuB,CAAvB,CAA3B;AACC;AACJ;;AACDV,QAAAA,UAAU,CAACC,KAAD,EAAoB;AAE1B,eAAKC,SAAL,CAAeC,YAAf;AAAA;AAAA,wCAAwCQ,eAAxC,CAAwD,KAAKnB,IAA7D;AACA,eAAKL,MAAL,GAAY,KAAZ;AACF;;AA5CuC,O;;;;;iBAIV,K","sourcesContent":["import { _decorator,  CCBoolean,  Component,   EventTouch, Input, Node, Vec3 } from 'cc';\r\n \r\nimport { ItemsPanel } from './ItemsPanel';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('DraggableItem')\r\nexport class DraggableItem extends Component {\r\n\r\n    private moving:boolean=false;\r\n    @property(CCBoolean)\r\n    public availableToMove:boolean=false;\r\n\r\n    @property(Node)\r\n    public ItemPanel:Node;\r\n\r\n    setAvailableToMove(available:boolean) {\r\nthis.availableToMove=available;\r\n    }\r\n  \r\n\r\n    onLoad()  {\r\n        this.node.on(Input.EventType.TOUCH_START, this.onTouchStart, this);\r\n        this.node.on(Input.EventType.TOUCH_MOVE, this.onTouchMove, this);\r\n        this.node.on(Input.EventType.TOUCH_END, this.onTouchEnd, this);\r\n       \r\n \r\n     \r\n        \r\n    }\r\n\r\n \r\n\r\n    onTouchStart(event: EventTouch) { \r\n       this.ItemPanel.getComponent(ItemsPanel).instantiateItem(this.node.position);\r\n\r\n\r\n    };\r\n    onTouchMove(event: EventTouch) {\r\n        if(this.availableToMove){\r\n\r\n        this.moving=true;\r\n        //BluePrintManager.setInfo(\"Moving\")\r\n        let pos = event.getUILocation();\r\n        this.node.setWorldPosition(new Vec3(pos.x, pos.y, 0));\r\n        }\r\n    }\r\n    onTouchEnd(event: EventTouch) {\r\n\r\n        this.ItemPanel.getComponent(ItemsPanel).elementReleased(this.node);\r\n        this.moving=false;\r\n     }\r\n\r\n   \r\n\r\n \r\n\r\n\r\n}\r\n\r\n\r\n"]}
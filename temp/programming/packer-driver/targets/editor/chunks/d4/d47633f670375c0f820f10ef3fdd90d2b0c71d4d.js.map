{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/DelaunayPackage/Delaunay.ts"],"names":["linkNode","plainVertex","Vertex","Pair","Edge","Triangle","removeOutRunners","verts","console","log","print","length","cant","border","j","a","b","c","v1","unitaryVector","v2","maxAngle","getRelativeAngle","links","k","angle","filterNulls","getRads","vecA","constPI","x","y","baseAngle","Math","atan","vecB","rads","transformedVectorB","Vec2","cos","sin","round","n","decimals","pow","elementsArr","i","pop","cross","lengthVector","sqrt","posA","posB","_decorator","Graphics","ccclass","property","EPSILON","constructor","_angle","addLink","v","founded","forEach","element","vertex","push","v0","equals","other","inverse","center","calcCircumCicle","A","B","C","D","E","F","G","dx","dy","abs","minx","min","miny","maxx","max","maxy","cx","cy","radius_squared","radius","inCircumcircle","dist_squared","Delaunay","start","numeros","filter","vertices","triangles","triangulate","triangle","moveTo","lineTo","stroke","plainVerts","plainData","output","pV","lk","lN","update","deltaTime","st","createBoundingTriangle","addVertex","undefined","stv0","stv1","stv2","edges","uniqueEdges","edge","edge1","unique","edge2"],"mappings":"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","sourcesContent":["import { _decorator, Component, Graphics,Vec2 } from 'cc';\r\n\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\nconst EPSILON = 1.0e-6\r\nconst constPI = 3.14159265359\r\n\r\nclass linkNode extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public _angle = 0;\r\n    constructor(x: number, y: number, angle: number) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this._angle = angle;\r\n    }\r\n}\r\nclass plainVertex extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public border: boolean = false;\r\n    public links: linkNode[] = []\r\n    constructor(x: number, y: number, border: boolean = false) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.border = border;\r\n    }\r\n}\r\n\r\nclass Vertex extends Vec2 {\r\n    public x = 0;\r\n    public y = 0;\r\n    public border: boolean = false;\r\n    public links: Pair[] = []\r\n    constructor(x: number, y: number, border: boolean = false) {\r\n        super();\r\n        this.x = x;\r\n        this.y = y;\r\n        this.border = border;\r\n    }\r\n\r\n    addLink(v: Pair) {\r\n        let founded = false;\r\n        this.links.forEach(element => {\r\n            if (v.vertex === element.vertex) {\r\n                founded = true;\r\n            }\r\n        });\r\n        if (!founded) this.links.push(v);\r\n    }\r\n}\r\n\r\nexport function removeOutRunners(verts: plainVertex[]) {\r\n    console.log(\"INSIDE REMOVE OUTRUNNERS\")\r\n    let print=false;\r\n    if(verts.length==30) {\r\n        print=true;\r\n        console.log(\"********************************************************************************************************\")\r\n\r\n    } \r\n    console.log(verts)\r\n    let cant = 0;\r\n    while (verts[cant] != null && verts[cant].border) {\r\n        cant++;\r\n    }\r\n    for (let j = 0; j < cant; ++j) {\r\n\r\n        let a = verts[j];\r\n        let b = verts[0];\r\n        let c = verts[j - 1];\r\n  \r\n        if (j < cant - 1) b = verts[j + 1];\r\n        if (j == 0) c = verts[cant - 1]\r\n        if(print) {\r\n        console.log(\"VER A : \"+a)\r\n        console.log(\"VER b : \"+b)\r\n        console.log(\"VER c : \"+c)\r\n          }\r\n        let v1 = unitaryVector(a, b)\r\n        let v2 = unitaryVector(a, c)\r\n        if(print) {\r\n        console.log(\"V1: \"+ v1)\r\n        console.log(\"v2: \"+v2)\r\n        }\r\n        let maxAngle = getRelativeAngle(v1, v2)\r\n        if(print) {console.log(\"MAX ANGLE: \"+maxAngle)}\r\n        if (a.links.length > 0) {\r\n            if(print) { console.log(\"LINKS: \"+a.links)}\r\n            for (let k = 0; k < a.links.length; k++) {\r\n                if (a.links[k] != null) {\r\n                    v2 = unitaryVector(a, a.links[k])\r\n                    let angle = getRelativeAngle(v1, v2)\r\n                    if(print) { console.log(\"ANGLE: \"+angle)}\r\n                    if (angle >= maxAngle || angle==0) {\r\n                        a.links[k] = null;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        filterNulls(a.links)\r\n    }\r\n}\r\n\r\n\r\nexport function getRads(vecA:Vec2){\r\n    const constPI = 3.14159265359\r\n    if(vecA.x<0.001&&vecA.x>-0.001 ){\r\n        if(vecA.y>0){ return constPI/2 } else{ return constPI*(3/2) }\r\n    }\r\n    if(vecA.y<0.001 &&vecA.y>-0.001 ){\r\n        if(vecA.x>0){ return 0 } else { return constPI }\r\n    }\r\n        let baseAngle=Math.atan((vecA.y) / (vecA.x))\r\n        console.log(\"BASE ANGLE: \"+baseAngle)\r\n        if(vecA.x<0&&vecA.y>0) baseAngle=(constPI+baseAngle)\r\n        if(vecA.x<0&&vecA.y<0) baseAngle=constPI+baseAngle\r\n        if(vecA.x>0&&vecA.y<0) baseAngle+=2*constPI+baseAngle\r\n    return baseAngle\r\n\r\n}\r\nexport function getRelativeAngle(vecA: Vec2, vecB: Vec2) {\r\n    let rads=getRads(vecA) \r\n    console.log(\"RADS:\" +rads)\r\n    let transformedVectorB=new Vec2(vecB.x*Math.cos(rads)+vecB.y*Math.sin(rads),-1*vecB.x*Math.sin(rads)+vecB.y*Math.cos(rads));\r\n    console.log(\"TRNAS VECT: \"+transformedVectorB)\r\n   return round(getRads(transformedVectorB),3);\r\n\r\n}\r\n\r\nexport function round(n:number, decimals:number){\r\n    return Math.round(n*Math.pow(10,decimals))/(Math.pow(10,decimals));\r\n}\r\n\r\nexport function filterNulls(elementsArr: any[]) {\r\n    for (let i = 0; i < elementsArr.length; i++) {\r\n        if (elementsArr[i] == null) {\r\n            for (let j = i + 1; j < elementsArr.length; j++) {\r\n                if (elementsArr[j] != null) {\r\n                    elementsArr[i] = elementsArr[j];\r\n                    elementsArr[j] = null;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    for (let i = elementsArr.length - 1; i > 0; i--) {\r\n        if (elementsArr[i] == null) elementsArr.pop();\r\n    }\r\n}\r\n\r\nclass Pair {\r\n    public vertex: Vertex;\r\n    public angle: number;\r\n    constructor(vertex: Vertex, angle: number) {\r\n        this.vertex = vertex;\r\n        this.angle = angle;\r\n    }\r\n}\r\n\r\n\r\nclass Edge {\r\n    public v0: Vertex;\r\n    public v1: Vertex;\r\n    constructor(v0: Vertex, v1: Vertex) {\r\n        this.v0 = v0;\r\n        this.v1 = v1;\r\n    }\r\n    equals = function (other: Edge) { return (this.v0 === other.v0 && this.v1 === other.v1); }\r\n    inverse = function () { return new Edge(this.v1, this.v0); };\r\n}\r\n\r\nclass Triangle {\r\n    public v0: Vertex;\r\n    public v1: Vertex;\r\n    public v2: Vertex;\r\n    public center: number = 0;\r\n    constructor(v0: Vertex, v1: Vertex, v2: Vertex) {\r\n        this.v0 = v0;\r\n        this.v1 = v1;\r\n        this.v2 = v2;\r\n        this.calcCircumCicle();\r\n    }\r\n\r\n    calcCircumCicle = function () {\r\n        var A = this.v1.x - this.v0.x;\r\n        var B = this.v1.y - this.v0.y;\r\n        var C = this.v2.x - this.v0.x;\r\n        var D = this.v2.y - this.v0.y;\r\n        var E = A * (this.v0.x + this.v1.x) + B * (this.v0.y + this.v1.y);\r\n        var F = C * (this.v0.x + this.v2.x) + D * (this.v0.y + this.v2.y);\r\n        var G = 2.0 * (A * (this.v2.y - this.v1.y) - B * (this.v2.x - this.v1.x));\r\n        var dx, dy;\r\n        if (Math.abs(G) < EPSILON) {\r\n            var minx = Math.min(this.v0.x, this.v1.x, this.v2.x);\r\n            var miny = Math.min(this.v0.y, this.v1.y, this.v2.y);\r\n            var maxx = Math.max(this.v0.x, this.v1.x, this.v2.x);\r\n            var maxy = Math.max(this.v0.y, this.v1.y, this.v2.y);\r\n            this.center = new Vertex((minx + maxx) / 2, (miny + maxy) / 2);\r\n            dx = this.center.x - minx;\r\n            dy = this.center.y - miny;\r\n        } else {\r\n            var cx = (D * E - B * F) / G;\r\n            var cy = (A * F - C * E) / G;\r\n            this.center = new Vertex(cx, cy);\r\n            dx = this.center.x - this.v0.x;\r\n            dy = this.center.y - this.v0.y;\r\n        }\r\n        this.radius_squared = dx * dx + dy * dy;\r\n        this.radius = Math.sqrt(this.radius_squared);\r\n    };\r\n\r\n    inCircumcircle = function (v: Vertex) {\r\n        var dx = this.center.x - v.x;\r\n        var dy = this.center.y - v.y;\r\n        var dist_squared = dx * dx + dy * dy;\r\n        return (dist_squared <= this.radius_squared);\r\n    }\r\n}\r\n\r\nfunction cross(vecA: Vec2, vecB: Vec2) {\r\n    return vecA.x * vecB.y - vecB.x * vecA.y;\r\n}\r\n\r\nfunction lengthVector(a: Vec2, b: Vec2) {\r\n    return Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\r\n}\r\n\r\nfunction unitaryVector(posA: Vec2, posB: Vec2) {\r\n    let length = lengthVector(posA, posB);\r\n    return new Vec2((posB.x - posA.x) / length, (posB.y - posA.y) / length);\r\n}\r\n\r\n\r\n\r\n@ccclass('Delaunay')\r\nexport class Delaunay extends Graphics {\r\n    start() {\r\n        let numeros = [12, 35, 97, 35]\r\n        numeros = numeros.filter((x) => x % 2 == 0)\r\n        let vertices: Vertex[] = [];\r\n        vertices.push(new Vertex(0, 0, true))   //0\r\n        vertices.push(new Vertex(10, 0, true))  //1\r\n        vertices.push(new Vertex(20, 0, true))  //2\r\n        vertices.push(new Vertex(20, 10, true)) //3\r\n        vertices.push(new Vertex(20, 20, true)) //4\r\n        vertices.push(new Vertex(20, 30, true)) //5\r\n        vertices.push(new Vertex(20, 40, true)) //6\r\n        vertices.push(new Vertex(30, 40, true)) //7\r\n        vertices.push(new Vertex(40, 40, true)) //8\r\n        vertices.push(new Vertex(50, 40, true)) //8\r\n        vertices.push(new Vertex(60, 40, true)) //8\r\n        vertices.push(new Vertex(70, 40, true)) //8\r\n        vertices.push(new Vertex(80, 40, true)) //8\r\n        vertices.push(new Vertex(90, 40, true)) //8\r\n        vertices.push(new Vertex(100, 40, true)) //8\r\n        vertices.push(new Vertex(110, 40, true)) //8\r\n        vertices.push(new Vertex(120, 40, true)) //8\r\n        vertices.push(new Vertex(120, 30, true)) //8\r\n        vertices.push(new Vertex(120, 20, true)) //8\r\n        vertices.push(new Vertex(120, 10, true)) //8\r\n        vertices.push(new Vertex(120, 0, true)) //8\r\n        vertices.push(new Vertex(130, 0, true)) //8\r\n        vertices.push(new Vertex(140, 0, true)) //8\r\n        vertices.push(new Vertex(140, 10, true)) //8\r\n        vertices.push(new Vertex(140, 20, true)) //8\r\n        vertices.push(new Vertex(140, 30, true)) //8\r\n        vertices.push(new Vertex(140, 40, true)) //8\r\n        vertices.push(new Vertex(140, 50, true)) //8\r\n        vertices.push(new Vertex(140, 60, true)) //8\r\n        vertices.push(new Vertex(130, 60, true)) //8\r\n        vertices.push(new Vertex(120, 60, true)) //8\r\n        vertices.push(new Vertex(110, 60, true)) //8\r\n        vertices.push(new Vertex(100, 60, true)) //8\r\n        vertices.push(new Vertex(90, 60, true)) //8\r\n        vertices.push(new Vertex(80, 60, true)) //8\r\n        vertices.push(new Vertex(70, 60, true)) //8\r\n        vertices.push(new Vertex(60, 60, true)) //8\r\n        vertices.push(new Vertex(50, 60, true)) //8\r\n        vertices.push(new Vertex(40, 60, true)) //10\r\n        vertices.push(new Vertex(30, 60, true)) //11\r\n        vertices.push(new Vertex(20, 60, true)) //12\r\n        vertices.push(new Vertex(10, 60, true)) //13\r\n        vertices.push(new Vertex(0, 60, true))  //14\r\n        vertices.push(new Vertex(0, 50, true))  //15\r\n        vertices.push(new Vertex(0, 40, true))  //16\r\n        vertices.push(new Vertex(0, 30, true))  //17\r\n        vertices.push(new Vertex(0, 20, true))  //18\r\n        vertices.push(new Vertex(0, 10, true))  //19\r\n        vertices.push(new Vertex(8, 41))  //7\r\n        vertices.push(new Vertex(9, 48))  //7\r\n        vertices.push(new Vertex(10, 13)) //8\r\n        vertices.push(new Vertex(11, 26)) //8\r\n        vertices.push(new Vertex(18, 47))\r\n        vertices.push(new Vertex(31, 52))\r\n        vertices.push(new Vertex(48, 48))\r\n        vertices.push(new Vertex(60, 51))\r\n        vertices.push(new Vertex(68, 52))\r\n        vertices.push(new Vertex(81, 49))\r\n        vertices.push(new Vertex(90, 52))\r\n        vertices.push(new Vertex(99, 50))\r\n        vertices.push(new Vertex(110, 51))\r\n        vertices.push(new Vertex(119, 52))\r\n        vertices.push(new Vertex(128, 49))\r\n        vertices.push(new Vertex(130, 41))  //7\r\n        vertices.push(new Vertex(128, 13)) //8\r\n        vertices.push(new Vertex(131, 26)) //8\r\n        let triangles = this.triangulate(vertices)\r\n\r\n        triangles.forEach(triangle => {\r\n            triangle.v0.addLink(new Pair(triangle.v1,  getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v0, triangle.v1))))\r\n            triangle.v1.addLink(new Pair(triangle.v0, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v1, triangle.v0))))\r\n            triangle.v1.addLink(new Pair(triangle.v2, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v1, triangle.v2))))\r\n            triangle.v2.addLink(new Pair(triangle.v1, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v2, triangle.v1))))\r\n            triangle.v0.addLink(new Pair(triangle.v2, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v0, triangle.v2))))\r\n            triangle.v2.addLink(new Pair(triangle.v0, getRelativeAngle(new Vec2(1, 0), unitaryVector(triangle.v2, triangle.v0))))\r\n            this.moveTo(triangle.v0.x, triangle.v0.y)\r\n            this.lineTo(triangle.v1.x, triangle.v1.y)\r\n            this.lineTo(triangle.v2.x, triangle.v2.y)\r\n            this.lineTo(triangle.v0.x, triangle.v0.y)\r\n            this.stroke();\r\n        });\r\n        let plainVerts = this.plainData(vertices);\r\n        removeOutRunners(plainVerts)\r\n    }\r\n\r\n    plainData(verts: Vertex[]) {\r\n        let output: plainVertex[] = []\r\n        verts.forEach(element => {\r\n            let pV = new plainVertex(element.x, element.y, element.border);\r\n            element.links.forEach(lk => {\r\n                if (lk != null) {\r\n                    let lN = new linkNode(lk.vertex.x, lk.vertex.y, lk.angle)\r\n                    pV.links.push(lN);\r\n                }\r\n            })\r\n            output.push(pV);\r\n        })\r\n        return output\r\n    }\r\n\r\n \r\n\r\n    update(deltaTime: number) { }\r\n\r\n\r\n    triangulate(vertices) {\r\n        var triangles: Triangle[] = [];\r\n        // First, create a \"supertriangle\" that bounds all vertices\r\n        let st = this.createBoundingTriangle(vertices);\r\n   \r\n        triangles.push(st);\r\n        // Next, begin the triangulation one vertex at a time\r\n        // NOTE: This is O(n^2) - can be optimized by sorting vertices\r\n        // along the x-axis and only considering triangles that have\r\n        // potentially overlapping circumcircles\r\n        vertices.forEach((vertex: Vertex) => {\r\n            triangles = this.addVertex(vertex, triangles)\r\n        });\r\n        // Remove triangles that shared edges with \"supertriangle\"\r\n        triangles = triangles.filter((triangle) => {\r\n            if (triangle.v0 == st.v0 || triangle.v0 == st.v1 || triangle.v0 == st.v2 ||\r\n                triangle.v1 == st.v0 || triangle.v1 == st.v1 || triangle.v1 == st.v2 ||\r\n                triangle.v2 == st.v0 || triangle.v2 == st.v1 || triangle.v2 == st.v2) return false;\r\n            return true;\r\n        })\r\n        return triangles;\r\n    }\r\n\r\n    // Internal: create a triangle that bounds the given vertices, with room to spare\r\n    createBoundingTriangle(vertices) {\r\n        // NOTE: There's a bit of a heuristic here. If the bounding triangle\r\n        // is too large and you see overflow/underflow errors. If it is too small\r\n        // you end up with a non-convex hull.\r\n        var minx, miny, maxx, maxy;\r\n        vertices.forEach(function (vertex) {\r\n            if (minx === undefined || vertex.x < minx) { minx = vertex.x; }\r\n            if (miny === undefined || vertex.y < miny) { miny = vertex.y; }\r\n            if (maxx === undefined || vertex.x > maxx) { maxx = vertex.x; }\r\n            if (maxy === undefined || vertex.y > maxy) { maxy = vertex.y; }\r\n        });\r\n        var dx = (maxx - minx) * 5;\r\n        var dy = (maxy - miny) * 5;\r\n        var stv0 = new Vertex(minx - dx, miny - dy * 3);\r\n        var stv1 = new Vertex(minx - dx, maxy + dy);\r\n        var stv2 = new Vertex(maxx + dx * 3, maxy + dy);\r\n        return new Triangle(stv0, stv1, stv2);\r\n    }\r\n\r\n    // Internal: update triangulation with a vertex\r\n    addVertex(vertex: Vertex, triangles: Triangle[]) {\r\n        var edges: Edge[] = [];\r\n        // Remove triangles with circumcircles containing the vertex\r\n        triangles = triangles.filter((triangle) => {\r\n            if (triangle.inCircumcircle(vertex)) {\r\n                edges.push(new Edge(triangle.v0, triangle.v1));\r\n                edges.push(new Edge(triangle.v1, triangle.v2));\r\n                edges.push(new Edge(triangle.v2, triangle.v0));\r\n                return false;\r\n            }\r\n            return true;\r\n        });\r\n\r\n        //console.log(\"ADDED VERTEX: \" + triangles.length)\r\n        edges = this.uniqueEdges(edges);\r\n        // Create new triangles from the unique edges and new vertex\r\n        edges.forEach((edge) => {\r\n            triangles.push(new Triangle(edge.v0, edge.v1, vertex));\r\n        });\r\n        return triangles;\r\n    }\r\n\r\n    // Internal: remove duplicate edges from an array\r\n    uniqueEdges(edges) {\r\n        // TODO: This is O(n^2), make it O(n) with a hash or some such\r\n        var uniqueEdges = [];\r\n        for (var i = 0; i < edges.length; ++i) {\r\n            var edge1 = edges[i];\r\n            var unique = true;\r\n            for (var j = 0; j < edges.length; ++j) {\r\n                if (i === j)\r\n                    continue;\r\n                var edge2 = edges[j];\r\n                if (edge1.equals(edge2) || edge1.inverse().equals(edge2)) {\r\n                    unique = false;\r\n                    break;\r\n                }\r\n            }\r\n            if (unique) uniqueEdges.push(edge1);\r\n        }\r\n        return uniqueEdges;\r\n    }\r\n}\r\n\r\n\r\n"]}
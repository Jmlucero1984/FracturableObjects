{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/Legacy/BluePrintManager.ts"],"names":["_decorator","BlockInputEvents","Component","Label","Node","UITransform","v2","Vec2","ItemsPanel","StructureContainer","ccclass","property","BluePrintManager","itemsPanelManager","generalManager","actualNode","onLoad","itemPanel","getComponent","setBluePrintManager","structureNode","setBluePrinManager","start","setGeneralManager","gm","setActualNode","node","blockEvents","blocked","infoLabel","string","blocker","enabled","setInfo","mensaje","elementReleased","dragabbleItemNode","name","worldPos","getWorldPosition","setParent","setWorldPosition","dimsStruc","width","height","dimsItem","placeDetonator","getPosition","x","y","destroy","incrementItems","update","deltaTime"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,gB,OAAAA,gB;AAAkBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAOC,MAAAA,I,OAAAA,I;AAAMC,MAAAA,W,OAAAA,W;AAAaC,MAAAA,E,OAAAA,E;AAAIC,MAAAA,I,OAAAA,I;;AAEvEC,MAAAA,U,iBAAAA,U;;AAEAC,MAAAA,kB,iBAAAA,kB;;;;;;;;;OACH;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBX,U;;kCAGjBY,gB,WADZF,OAAO,CAAC,kBAAD,C,UAKHC,QAAQ,CAACR,KAAD,C,UAERQ,QAAQ,CAACP,IAAD,C,UAERO,QAAQ,CAACP,IAAD,C,UAGRO,QAAQ,CAACP,IAAD,C,2BAZb,MACaQ,gBADb,SACsCV,SADtC,CACgD;AAAA;AAAA;;AAAA;;AAAA;;AAAA;;AAAA;;AAAA,eAcpCW,iBAdoC;AAAA,eAepCC,cAfoC;AAAA,eAgBpCC,UAhBoC;AAAA;;AAkB5CC,QAAAA,MAAM,GAAG;AACN,eAAKH,iBAAL,GAAuB,KAAKI,SAAL,CAAeC,YAAf;AAAA;AAAA,uCAAvB;AACA,eAAKL,iBAAL,CAAuBM,mBAAvB,CAA2C,IAA3C;AACA,eAAKC,aAAL,CAAmBF,YAAnB;AAAA;AAAA,wDAAoDG,kBAApD,CAAuE,IAAvE;AACF;;AAEDC,QAAAA,KAAK,GAAG,CAAE;;AAEHC,QAAAA,iBAAiB,CAACC,EAAD,EAAmB;AACvC,eAAKV,cAAL,GAAoBU,EAApB;AACH;;AAEMC,QAAAA,aAAa,CAACC,IAAD,EAAW;AAC3B,eAAKX,UAAL,GAAgBW,IAAhB;AACH;;AAEDC,QAAAA,WAAW,CAACC,OAAD,EAAmB;AAC1B,eAAKC,SAAL,CAAeC,MAAf,GAAsB,aAAWF,OAAjC;AACA,eAAKG,OAAL,CAAab,YAAb,CAA0BjB,gBAA1B,EAA4C+B,OAA5C,GAAoDJ,OAApD;AACH;;AAEOK,QAAAA,OAAO,CAACC,OAAD,EAAiB;AAC3B,eAAKL,SAAL,CAAeC,MAAf,GAAsBI,OAAtB;AACJ;;AACOC,QAAAA,eAAe,CAACC,iBAAD,EAAwB;AAC3C,cAAG,KAAKrB,UAAL,IAAiB,IAApB,EAAyB;AACpB,iBAAKkB,OAAL,CAAa,WAAS,KAAKlB,UAAL,CAAgBsB,IAAtC;;AACD,gBAAG,KAAKtB,UAAL,CAAgBsB,IAAhB,IAAsB,oBAAzB,EAA+C;AAC9C,mBAAKR,SAAL,CAAeC,MAAf,GAAsB,sDAAoDM,iBAAiB,CAACC,IAA5F;AACA,kBAAIC,QAAQ,GAACF,iBAAiB,CAACG,gBAAlB,EAAb;AACAH,cAAAA,iBAAiB,CAACI,SAAlB,CAA4B,KAAKpB,aAAjC;AACAgB,cAAAA,iBAAiB,CAACK,gBAAlB,CAAmCH,QAAnC;AACA,kBAAII,SAAS,GAAC,IAAInC,IAAJ,CAAS,KAAKa,aAAL,CAAmBF,YAAnB,CAAgCb,WAAhC,EAA6CsC,KAAtD,EAA6D,KAAKvB,aAAL,CAAmBF,YAAnB,CAAgCb,WAAhC,EAA6CuC,MAA1G,CAAd;AACA,kBAAIC,QAAQ,GAAC,IAAKtC,IAAL,CAAU6B,iBAAiB,CAAClB,YAAlB,CAA+Bb,WAA/B,EAA4CsC,KAA5C,GAAkD,CAA5D,EAA+DP,iBAAiB,CAAClB,YAAlB,CAA+Bb,WAA/B,EAA4CuC,MAA5C,GAAmD,CAAlH,CAAb;AACA,mBAAK9B,cAAL,CAAoBgC,cAApB,CAAmCxC,EAAE,CAAC,CAAC8B,iBAAiB,CAACW,WAAlB,GAAgCC,CAAhC,GAAkCH,QAAQ,CAACG,CAA5C,IAA+CN,SAAS,CAACM,CAA1D,EAA4D,CAACZ,iBAAiB,CAACW,WAAlB,GAAgCE,CAAhC,GAAkCJ,QAAQ,CAACI,CAA5C,IAA+CP,SAAS,CAACO,CAArH,CAArC;AAEA,aATD,MAUK;AACD,mBAAKpB,SAAL,CAAeC,MAAf,GAAsB,qBAAmBM,iBAAiB,CAACC,IAA3D;AACAD,cAAAA,iBAAiB,CAACc,OAAlB;AACA,mBAAKrC,iBAAL,CAAuBsC,cAAvB;AACA;AACP,WAjBD,MAiBO;AACH,iBAAKtB,SAAL,CAAeC,MAAf,GAAsB,qBAAmBM,iBAAiB,CAACC,IAA3D;AACAD,YAAAA,iBAAiB,CAACc,OAAlB;AACA,iBAAKrC,iBAAL,CAAuBsC,cAAvB;AACA;AAEP;;AAEDC,QAAAA,MAAM,CAACC,SAAD,EAAoB,CAEzB;;AAtE2C,O","sourcesContent":["import { _decorator, BlockInputEvents, Component, Label, Node, UITransform, v2, Vec2 } from 'cc';\r\nimport { DraggableItem } from './DraggableItem';\r\nimport { ItemsPanel } from './ItemsPanel';\r\nimport { GeneralManager } from './GeneralManager';\r\nimport { StructureContainer } from './StructureContainer';\r\nconst { ccclass, property } = _decorator;\r\n\r\n@ccclass('BluePrintManager')\r\nexport class BluePrintManager extends Component {\r\n   \r\n\r\n\r\n    @property(Label)\r\n    public  infoLabel:Label;\r\n    @property(Node)\r\n    public itemPanel:Node;\r\n    @property(Node)\r\n    public blocker:Node;\r\n\r\n    @property(Node)\r\n    private structureNode:Node;\r\n    \r\n    private itemsPanelManager:ItemsPanel;\r\n    private generalManager:GeneralManager;\r\n    private actualNode:Node;\r\n   \r\n    onLoad() {\r\n       this.itemsPanelManager=this.itemPanel.getComponent(ItemsPanel);\r\n       this.itemsPanelManager.setBluePrintManager(this);\r\n       this.structureNode.getComponent(StructureContainer).setBluePrinManager(this);\r\n    }\r\n\r\n    start() {}\r\n\r\n    public setGeneralManager(gm:GeneralManager){\r\n        this.generalManager=gm;\r\n    }\r\n\r\n    public setActualNode(node:Node){\r\n        this.actualNode=node;   \r\n    }\r\n\r\n    blockEvents(blocked: boolean) {\r\n        this.infoLabel.string=\"BLOCKER \"+blocked;\r\n        this.blocker.getComponent(BlockInputEvents).enabled=blocked;\r\n    }\r\n\r\n    public  setInfo(mensaje:string) {\r\n         this.infoLabel.string=mensaje;\r\n    }\r\n    public  elementReleased(dragabbleItemNode:Node){\r\n        if(this.actualNode!=null){\r\n             this.setInfo(\"ACTUAL\"+this.actualNode.name)\r\n            if(this.actualNode.name==\"StructureContainer\") {\r\n             this.infoLabel.string=\"Se dejo dentro del Structure Container al objeto \"+dragabbleItemNode.name;\r\n             let worldPos=dragabbleItemNode.getWorldPosition();\r\n             dragabbleItemNode.setParent(this.structureNode)\r\n             dragabbleItemNode.setWorldPosition(worldPos);\r\n             let dimsStruc=new Vec2(this.structureNode.getComponent(UITransform).width, this.structureNode.getComponent(UITransform).height);\r\n             let dimsItem=new  Vec2(dragabbleItemNode.getComponent(UITransform).width/2, dragabbleItemNode.getComponent(UITransform).height/2);\r\n             this.generalManager.placeDetonator(v2((dragabbleItemNode.getPosition().x+dimsItem.x)/dimsStruc.x,(dragabbleItemNode.getPosition().y+dimsItem.y)/dimsStruc.y))\r\n     \r\n            } \r\n            else {\r\n                this.infoLabel.string=\"Se ha destruido \"+dragabbleItemNode.name;\r\n                dragabbleItemNode.destroy();\r\n                this.itemsPanelManager.incrementItems();\r\n               }\r\n        } else {\r\n            this.infoLabel.string=\"Se ha destruido \"+dragabbleItemNode.name;\r\n            dragabbleItemNode.destroy();\r\n            this.itemsPanelManager.incrementItems();\r\n           }\r\n        \r\n    }\r\n\r\n    update(deltaTime: number) {\r\n        \r\n    }\r\n}\r\n\r\n\r\n"]}
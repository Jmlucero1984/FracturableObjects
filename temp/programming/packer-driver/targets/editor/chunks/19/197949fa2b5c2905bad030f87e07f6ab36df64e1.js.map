{"version":3,"sources":["file:///C:/Users/jmluc/FracturableObjects/assets/Scripts/Legacy/ButtonTest.ts"],"names":["degreeToRad","angle","_decorator","Button","Component","EditBox","EventHandler","linkNode","ccclass","property","ButtonTest","links","onLoad","console","log","push","clickTestEvt","createClickEventHandler","node","Test","getComponent","clickEvents","clickTest","event","customEventData","input","Input","string","inputParsed","Number","parseInt","rad","length","index","findClosestAngle","Output","y","toString","linkNodes","PI","minAngle","i","diff","Math","abs","_angle","target","component","handler","cstEventData","evtHandler","start","update","deltaTime"],"mappings":"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","sourcesContent":["import { _decorator, Button, Component, EditBox, EventHandler, Node } from 'cc';\r\nimport { findClosestAngle, linkNode } from './DelaunayPackage/DelaunaySplitter';\r\nconst { ccclass, property } = _decorator;\r\n\r\n\r\n\r\nfunction degreeToRad(angle:number){\r\n    if(angle==0) return 0;\r\n    return angle/(180/3.141592654);\r\n}\r\n@ccclass('ButtonTest')\r\nexport class ButtonTest extends Component {\r\n    \r\n    @property(Button)\r\n    public Test: Button\r\n    @property(EditBox)\r\n    public Input: EditBox\r\n    @property(EditBox)\r\n    public Output: EditBox\r\n\r\n    private  links:linkNode[]=[];\r\n    \r\n\r\n\r\n    protected onLoad(): void {\r\n        console.log(\"On load\")\r\n       // this.links.push(new linkNode(0,0,degreeToRad(0)))\r\n        this.links.push(new linkNode(0,15,degreeToRad(15)))\r\n        this.links.push(new linkNode(0,70,degreeToRad(70)))\r\n        this.links.push(new linkNode(0,90,degreeToRad(90)))\r\n        this.links.push(new linkNode(0,110,degreeToRad(110)))\r\n        this.links.push(new linkNode(0,180,degreeToRad(180)))\r\n        this.links.push(new linkNode(0,190,degreeToRad(190)))\r\n        this.links.push(new linkNode(0,250,degreeToRad(250)))\r\n        this.links.push(new linkNode(0,270,degreeToRad(270)))\r\n        this.links.push(new linkNode(0,345,degreeToRad(345)))\r\n        const clickTestEvt =  this.createClickEventHandler(this.node,\"ButtonTest\",\"clickTest\",\"\");\r\n        if (this.Test == null) {\r\n            this.Test=this.node.getComponent(Button)\r\n        }\r\n        this.Test.clickEvents.push(clickTestEvt);\r\n    }\r\n    clickTest(event: Event, customEventData: string){\r\n       let input =this.Input.string;\r\n        console.log(\"INPUTS: \"+input)\r\n        let inputParsed=Number.parseInt(input)\r\n        console.log(\"PARSED: \"+ inputParsed)\r\n        let rad=degreeToRad(inputParsed)\r\n        console.log(\"RAD: \"+rad)\r\n        console.log(\"LINKS DIM: \"+ this.links.length)\r\n        let index = this.findClosestAngle(rad,this.links)\r\n        console.log(\"INDEX: \"+index)\r\n \r\n        this.Output.string=this.links[index].y.toString();\r\n\r\n\r\n    }\r\n\r\n    findClosestAngle(angle: number, linkNodes: linkNode[]) {\r\n        const PI=3.141592654\r\n        //  console.log(\"FIND CLOSES ANGLE\")\r\n        //  console.log(\"ANGLE: \"+angle)\r\n        //  console.log(\"LINKS\")\r\n        //console.log(linkNodes)\r\n        let minAngle = PI*2;\r\n        let index = 0;\r\n        for (let i = 0; i < linkNodes.length; i++) {\r\n            if(linkNodes[i]==null) return null;\r\n            let diff = Math.abs(angle - linkNodes[i]._angle)\r\n            console.log(\"Index: \"+i)\r\n            console.log(\"DIFF: \"+diff)\r\n            if(diff>(3/2)*PI) {\r\n                diff=(2*PI-diff)\r\n                console.log(\"NEW DIFF: \"+diff)\r\n            }\r\n            if (diff < minAngle) {\r\n    \r\n                minAngle = diff;\r\n                index = i;\r\n                // console.log(\"nuevo MIN: \"+minAngle+\"   index: \"+index)\r\n    \r\n            }\r\n        }\r\n        return index;\r\n    \r\n    }\r\n    \r\n    createClickEventHandler(target:Node,component:string,handler:string, cstEventData:string){\r\n        let evtHandler= new EventHandler();\r\n        evtHandler.target=target;\r\n        evtHandler.component=component;\r\n        evtHandler.handler=handler;\r\n        evtHandler.customEventData=cstEventData;\r\n        return evtHandler;\r\n\r\n}\r\n    start() {\r\n\r\n    }\r\n\r\n    update(deltaTime: number) {\r\n     \r\n    }\r\n}\r\n\r\n\r\n"]}